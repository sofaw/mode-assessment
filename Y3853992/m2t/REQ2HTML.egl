<!DOCTYPE html>
<html>
<head>
  <title>Y3853992</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="../style.css">
</head>
<body>

<div class="tab">
  <button  id="defaultOpenTab" class="tablinks" onclick="openTab(event, 'requirements-tab')">Requirements</button>
  <button class="tablinks" onclick="openTab(event, 'team-members-tab')">Team Members</button>
  <button class="tablinks" onclick="openTab(event, 'test-cases-tab')">Test Cases</button>
  <button class="tablinks" onclick="openTab(event, 'conflicts-tab')">Conflicts</button>
</div>

<div id="requirements-tab" class="tabcontent">
  <h2>Requirements</h2> 
  [%for (rootReq in rm.requirements.select(r | r.parentDecomposition.size() == 0)) {%]
    [% rootReq.generateRequirementTree(); %]
  [%}%]
</div>

<div id="team-members-tab" class="tabcontent">
  <h2>Team Members</h2>
  [%for (teamMember in rm.teamMembers) {%]
    <h3>[%=teamMember.name%]</h3>
    [% printRequirementsList(teamMember.requirements); %]
  [%}%]
</div>

<div id="test-cases-tab" class="tabcontent">
  <h2>Test Cases</h2>     
  [%for (testCase in rm.testCases) {%]
    <h3>Test case: "[%=testCase.description%]"</h3>
    [% printRequirementsList(testCase.verifies); %]
  [%}%] 
</div>

<div id="conflicts-tab" class="tabcontent">
  <h2>Conflicts</h2> 
  <p>There are conflicts between the following pairs of requirements:</p>  
  <ul>   
    [%for (conflict in rm.conflicts) {%]
      <li>Requirement [%=conflict.first.identifier%] and Requirement [%=conflict.second.identifier%]</li>
    [%}%] 
  </ul>
</div>


<script>
document.getElementById("defaultOpenTab").click();

function openTab(evt, tabName) {
  var i, tabcontent, tablinks;

  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
  }

  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
      tablinks[i].className = tablinks[i].className.replace(" active", "");
  }

  document.getElementById(tabName).style.display = "block";
  evt.currentTarget.className += " active";
}
</script>
</body>
</html>

[% operation Requirement generateRequirementTree() { %]
  <details class="req-details">
    
    <!-- info and progress bar for requirement -->
    <summary>
      Requirement: [%=self.identifier%]
      
      <!-- info hidden by default -->
      <details class="req-info-details">
        <summary></summary>
        <div class="indented">
          <p>Type: [%=self.type%]</p>
          <p>Description: "[%=self.description%]"</p>
          <p>Team Members: [% self.printTeamMembers(); %]</p>
          [% if(self.type == RequirementType#System) { %]
            <p>Test Cases: [% self.printTestCases(); %]</p>
          [% } %]
        </div>
      </details>				
      
      <!-- progress bar -->
      [% var progressPercent = self.progress * 100; %]
      <div class="progressContainer">
        <div class="progressBar" style="width: [%=progressPercent%]%;">[%=progressPercent%]%</div>
      </div>
    </summary>
    
    <!-- generate summaries for requirements in self.decomposition -->
    [%for (req in self.decomposition) {%]
      <div class="indented">
      [% req.generateRequirementTree(); %]
      </div>	
    [% } %]	
    	
  </details>
[% } %]

[% operation printRequirementsList(list) { %]
  <ul>
    [% for(item in list) { %]
      <li>Requirement: [%=item.identifier%]</li>
    [% } %]
  </ul>
[% } %]

[% operation Requirement printTeamMembers() { %]
  <ul>
    [% for(tm in self.teamMembers) { %]
      <li>[%=tm.name%]</li>
    [% } %]
  </ul>
[% } %]

[% operation Requirement printTestCases() { %]
  <ul>
    [% for(tc in self.testCases) { %]
	  <li>"[%=tc.description%]"</li>
	[% } %]
  </ul>
[% } %]

